<script setup lang="ts">
export interface OgProps {
	title: string;
	imageUrl?: string;
	authorName?: string;
	authorImage?: string;
	badgeLabel?: string;
	publishedAt?: string;
}

// inherited attrs can mess up the satori parser
defineOptions({
	inheritAttrs: false,
});

defineProps<OgProps>();

function truncate(str: string, n: number) {
	// Leave whole words intact
	const isTooLong = str.length > n;
	const s = isTooLong ? str.slice(0, Math.max(0, n - 1)) : str;
	const i = s.lastIndexOf(' ');
	return isTooLong ? `${s.slice(0, Math.max(0, i))}...` : s;
}
</script>

<template>
	<div class="flex relative w-[1200px] h-[630px] overflow-hidden bg-white">
		<!-- Left Side -->
		<div class="flex flex-col justify-between relative w-[600px] h-full p-12">
			<div class="flex">
				<svg width="173" height="36" viewBox="0 0 173 36" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path
						fill-rule="evenodd"
						clip-rule="evenodd"
						d="M47.4244 22.7181C47.1509 22.6497 46.923 22.5813 46.7179 22.4902C46.5722 22.4254 46.4495 22.3492 46.3416 22.2614C46.2589 22.1941 46.2239 22.0866 46.2339 21.9805C46.3411 20.8425 46.2218 19.837 46.3305 18.7072C46.7863 14.1038 49.6805 15.5623 52.2785 14.8102C53.756 14.394 55.2335 13.5788 55.7913 11.9827C55.8943 11.6881 55.8062 11.3661 55.5998 11.132C53.9065 9.21229 52.0335 7.51504 49.9995 6.05916C43.1565 1.18709 34.269 -0.844273 26.0976 0.320581C25.7527 0.369746 25.5719 0.751614 25.7619 1.04362C26.7654 2.58571 28.0723 3.85715 29.5676 4.8089C29.8821 5.00908 29.7534 5.42922 29.3912 5.34092C28.6501 5.16025 27.7347 4.82903 26.8688 4.22184C26.769 4.15185 26.6408 4.1342 26.5275 4.17935C26.1308 4.33755 25.5739 4.55953 25.0985 4.76318C24.7807 4.89929 24.716 5.30812 24.9785 5.53308C29.0527 9.02474 34.9338 9.5725 39.5799 6.8194C39.8995 6.63007 40.4184 7.03418 40.3198 7.39223C40.182 7.89243 40.0247 8.55654 39.8583 9.43196C38.6961 15.3116 35.3461 14.8558 31.1984 13.3745C22.9487 10.3845 18.2521 12.9124 14.0863 7.92749C13.7607 7.53786 13.1918 7.40033 12.8155 7.74119C11.993 8.48609 11.5086 9.55011 11.5086 10.6854C11.5086 12.0548 12.2097 13.2294 13.2519 13.9392C13.398 14.0387 13.5932 13.9967 13.7033 13.8584C13.9138 13.5942 14.0941 13.4042 14.2995 13.2713C14.6014 13.0761 14.7618 13.5222 14.501 13.7697C13.6912 14.5381 13.4342 15.4722 12.8759 17.2487C11.9643 20.1429 12.3518 23.1055 8.09017 23.8803C5.83404 23.9943 5.87962 25.5212 5.05921 27.8001C4.11558 30.5261 2.88254 31.7471 0.614392 34.1085C0.263635 34.4737 0.23175 35.0601 0.624886 35.3792C1.52536 36.1101 2.45298 36.1416 3.39559 35.7535C5.78846 34.7508 7.63439 31.6515 9.36637 29.646C11.3034 27.4127 15.9525 28.3698 19.462 26.182C21.2873 25.0628 22.4099 23.6442 22.1615 21.5529C22.114 21.1529 22.5687 20.9208 22.7205 21.2938C22.9455 21.8464 23.0965 22.4288 23.1665 23.0282C23.19 23.2296 23.3703 23.3787 23.5729 23.3689C27.3404 23.1861 32.195 27.296 36.7433 28.4565C37.0528 28.5355 37.2745 28.1779 37.1018 27.9092C36.8327 27.4904 36.6026 27.0572 36.4172 26.615C36.251 26.2162 36.1178 25.827 36.0152 25.4487C35.9087 25.0554 36.4855 24.9408 36.6943 25.2907C37.9092 27.3267 40.2097 29.189 43.3679 29.4181C44.4845 29.5093 45.7152 29.3725 46.9914 28.9851C48.5182 28.5293 49.9312 27.9368 51.6176 28.2559C52.871 28.4837 54.0332 29.1218 54.7625 30.1929C55.7775 31.6732 57.9111 32.0743 59.0692 30.5583C59.2471 30.3254 59.2616 30.0093 59.1454 29.7402C56.5979 23.8383 50.1846 23.4304 47.4244 22.7181Z"
						fill="#0E1C2F"
					/>
					<path
						d="M82.4558 9.78211C82.5365 9.33766 82.9051 9.00251 83.3552 8.96437L86.3584 8.70986C86.4383 8.70309 86.5181 8.72319 86.5853 8.76698C86.7063 8.84589 86.7683 8.98955 86.7428 9.13175L83.6631 26.2935C83.5776 26.7701 83.163 27.1169 82.6789 27.1169H80.4333C80.2252 27.1169 80.0674 26.9294 80.1028 26.7244C80.1576 26.4081 79.7643 26.1869 79.5014 26.3709C78.4769 27.088 77.3495 27.4465 76.1194 27.4465C74.4143 27.4465 73.0037 26.8356 71.8875 25.614C70.7625 24.3923 70.2 22.9025 70.2 21.1447C70.2 18.8947 70.8943 17.0227 72.283 15.5285C73.6716 14.0344 75.4382 13.2873 77.5828 13.2873C78.8356 13.2873 79.9 13.6048 80.776 14.2397C81.1105 14.4821 81.6306 14.3257 81.7044 13.9193L82.4558 9.78211ZM77.2532 23.9265C78.3079 23.9265 79.1736 23.5485 79.8503 22.7927C80.5095 22.0368 80.8391 21.1096 80.8391 20.0109C80.8391 19.0529 80.571 18.2795 80.0349 17.6906C79.4988 17.1018 78.7957 16.8073 77.9255 16.8073C76.8621 16.8073 76.0007 17.1853 75.3416 17.9411C74.6736 18.6882 74.3396 19.6154 74.3396 20.7229C74.3396 21.6721 74.6121 22.4455 75.157 23.0432C75.6931 23.632 76.3918 23.9265 77.2532 23.9265Z"
						fill="#0E1C2F"
					/>
					<path
						d="M91.2874 11.4548C90.6633 11.4548 90.1228 11.2351 89.6658 10.7956C89.2175 10.3562 88.9934 9.82002 88.9934 9.18721C88.9934 8.3874 89.2879 7.70625 89.8767 7.14375C90.448 6.58125 91.138 6.3 91.9465 6.3C92.5618 6.3 93.0935 6.52851 93.5418 6.98555C93.99 7.45137 94.2141 7.9875 94.2141 8.59394C94.2141 9.38496 93.9241 10.0573 93.344 10.611C92.7727 11.1735 92.0872 11.4548 91.2874 11.4548ZM90.869 26.2947C90.783 26.7707 90.3687 27.1169 89.885 27.1169H87.7633C87.1403 27.1169 86.6689 26.5533 86.7791 25.94L88.8455 14.44C88.9311 13.9636 89.3457 13.6169 89.8298 13.6169H91.9626C92.586 13.6169 93.0575 14.1812 92.9467 14.7947L90.869 26.2947Z"
						fill="#0E1C2F"
					/>
					<path
						d="M105.427 13.6806C105.529 13.7227 105.608 13.8061 105.649 13.9087C105.693 14.017 105.69 14.1384 105.641 14.2444L104.41 16.9307C104.369 17.0216 104.298 17.096 104.209 17.142C104.073 17.2127 103.911 17.2064 103.772 17.1406C103.346 16.9386 102.878 16.8451 102.368 16.8601C101.261 16.8601 100.408 17.3083 99.8108 18.2048C99.5911 18.5476 99.3538 19.3474 99.0989 20.6042L98.1094 26.2884C98.026 26.7673 97.6103 27.1169 97.1242 27.1169H94.9816C94.3586 27.1169 93.8872 26.5533 93.9974 25.94L96.0638 14.44C96.1494 13.9636 96.564 13.6169 97.048 13.6169H98.9494C99.324 13.6169 99.6084 13.9539 99.5456 14.3231C99.4932 14.6309 99.9161 14.8324 100.15 14.6251C100.361 14.4372 100.578 14.2725 100.8 14.1311C101.626 13.5861 102.509 13.3049 103.449 13.2873C104.131 13.2873 104.79 13.4184 105.427 13.6806Z"
						fill="#0E1C2F"
					/>
					<path
						d="M112.619 13.2873C114.772 13.2873 116.394 13.9772 117.484 15.3571C118.574 16.737 118.921 18.3981 118.525 20.3405C118.511 20.4328 118.492 20.5288 118.468 20.6286C118.371 21.034 117.985 21.2897 117.569 21.2897H109.451C108.926 21.2897 108.466 21.702 108.562 22.218C108.665 22.7708 108.914 23.2216 109.31 23.5705C109.899 24.0979 110.668 24.3615 111.617 24.3615C112.956 24.3615 114.158 23.8943 115.223 22.9597C115.287 22.9038 115.369 22.8718 115.454 22.8718C115.554 22.8718 115.649 22.9159 115.714 22.9925L117.005 24.52C117.083 24.6118 117.116 24.7331 117.097 24.8517C117.083 24.9359 117.043 25.0139 116.981 25.0734C115.372 26.6382 113.386 27.4292 111.024 27.4465C109.029 27.4465 107.416 26.8137 106.185 25.548C104.946 24.2912 104.392 22.6828 104.524 20.7229C104.577 19.3781 104.946 18.1564 105.632 17.0578C106.3 15.968 107.205 15.0979 108.347 14.4475C109.648 13.674 111.072 13.2873 112.619 13.2873ZM109.493 17.6393C109.108 18.1891 109.592 18.8508 110.263 18.8508H113.805C114.337 18.8508 114.804 18.4225 114.659 17.9105C114.578 17.623 114.447 17.3608 114.267 17.1237C113.827 16.5261 113.151 16.2316 112.237 16.2404C111.419 16.2404 110.716 16.4733 110.127 16.9392C109.886 17.1468 109.675 17.3802 109.493 17.6393Z"
						fill="#0E1C2F"
					/>
					<path
						d="M126.389 27.4465C124.456 27.4465 122.878 26.8356 121.657 25.614C120.426 24.4011 119.811 22.8322 119.811 20.9074C119.811 19.6506 120.088 18.4904 120.641 17.427C121.195 16.3547 121.969 15.4714 122.962 14.7771C124.403 13.7839 126.007 13.2873 127.774 13.2873C130.103 13.2873 131.889 14.0616 133.134 15.6101C133.205 15.699 133.227 15.8171 133.197 15.9271C133.177 16.0022 133.133 16.0688 133.072 16.1174L130.652 18.0489C130.589 18.0986 130.512 18.1257 130.432 18.1257C130.319 18.1257 130.214 18.0705 130.144 17.982C129.521 17.1989 128.682 16.8073 127.629 16.8073C126.609 16.8073 125.765 17.1193 125.097 17.7434C124.324 18.4816 123.937 19.4572 123.937 20.6701C123.937 21.6545 124.219 22.4411 124.781 23.03C125.335 23.6276 126.077 23.9265 127.009 23.9265C127.975 23.9265 128.832 23.5737 129.581 22.868C129.649 22.804 129.738 22.7663 129.831 22.7663C129.931 22.7663 130.027 22.8089 130.094 22.8834L131.804 24.7914C131.881 24.8779 131.915 24.9952 131.895 25.1097C131.881 25.1889 131.843 25.2621 131.784 25.3172C130.273 26.7367 128.475 27.4465 126.389 27.4465Z"
						fill="#0E1C2F"
					/>
					<path
						d="M144.419 15.862C144.335 16.3401 143.919 16.6887 143.434 16.6887H141.22C140.736 16.6887 140.322 17.0353 140.236 17.5117L139.422 22.0412C139.193 23.2805 139.606 23.9001 140.661 23.9001C141.1 23.9001 141.518 23.7687 141.916 23.5059C142.02 23.4373 142.155 23.4293 142.261 23.4948C142.326 23.535 142.373 23.5984 142.392 23.6721L142.971 25.8276C143.011 25.978 142.991 26.1383 142.915 26.2741C142.872 26.3516 142.812 26.4188 142.738 26.4685C141.773 27.1205 140.685 27.4465 139.474 27.4465C138.015 27.4465 136.873 27.0246 136.047 26.1809C135.221 25.3547 134.948 24.111 135.229 22.4499L136.074 17.8338C136.183 17.2378 135.726 16.6887 135.12 16.6887C134.517 16.6887 134.06 16.1442 134.164 15.5501L134.359 14.4436C134.443 13.9655 134.858 13.6169 135.344 13.6169H136.013C136.498 13.6169 136.913 13.2693 136.998 12.7921L137.442 10.2986C137.521 9.85299 137.89 9.51623 138.34 9.47749L141.289 9.22416C141.369 9.2173 141.449 9.23735 141.516 9.28111C141.637 9.36001 141.699 9.50375 141.673 9.64586L141.165 12.438C141.054 13.0518 141.525 13.6169 142.149 13.6169H143.622C144.244 13.6169 144.715 14.178 144.607 14.7902L144.419 15.862Z"
						fill="#0E1C2F"
					/>
					<path
						d="M154.023 21.5798L155.299 14.4409C155.385 13.9641 155.799 13.6169 156.284 13.6169H158.392C159.014 13.6169 159.486 14.1798 159.376 14.7928L157.321 26.2928C157.236 26.7697 156.821 27.1169 156.337 27.1169H154.133C153.918 27.1169 153.755 26.922 153.793 26.71C153.851 26.386 153.453 26.157 153.182 26.3443C152.12 27.0791 150.985 27.4465 149.778 27.4465C148.16 27.4465 146.939 26.9147 146.113 25.8513C145.286 24.7878 145.023 23.3728 145.322 21.6062L146.611 14.4399C146.696 13.9635 147.111 13.6169 147.595 13.6169H149.742C150.365 13.6169 150.837 14.1805 150.726 14.7937L149.54 21.3952C149.417 22.1599 149.51 22.7707 149.817 23.2277C150.125 23.676 150.608 23.9001 151.267 23.9001C152.19 23.9001 152.911 23.5573 153.43 22.8718C153.702 22.5729 153.9 22.1423 154.023 21.5798Z"
						fill="#0E1C2F"
					/>
					<path
						d="M165.328 27.4729C163.992 27.4729 162.806 27.2399 161.768 26.7741C160.769 26.3446 160.049 25.791 159.609 25.1132C159.554 25.0293 159.537 24.927 159.555 24.8286C159.571 24.7393 159.616 24.6578 159.682 24.5961L161.706 22.7172C161.763 22.664 161.838 22.6345 161.916 22.6345C162.021 22.6345 162.118 22.6886 162.182 22.7722C162.48 23.1642 162.944 23.5138 163.575 23.821C164.269 24.1638 164.963 24.3352 165.658 24.3352C166.203 24.3352 166.624 24.2297 166.923 24.0187C167.231 23.8078 167.385 23.5178 167.385 23.1486C167.385 22.9289 167.301 22.7268 167.134 22.5422C166.976 22.3488 166.783 22.195 166.554 22.0808C166.255 21.9401 165.965 21.8171 165.684 21.7116C165.113 21.5183 164.616 21.3249 164.194 21.1315C163.807 20.947 163.39 20.7009 162.942 20.3933C162.045 19.7604 161.597 18.8771 161.597 17.7434C161.597 16.425 162.133 15.3483 163.205 14.5134C164.278 13.6784 165.688 13.2609 167.437 13.2609C168.58 13.2609 169.635 13.4587 170.601 13.8542C171.488 14.2235 172.156 14.7193 172.605 15.3416C172.667 15.4264 172.688 15.5331 172.67 15.6363C172.654 15.7287 172.607 15.8128 172.536 15.875L170.589 17.5967C170.521 17.6572 170.432 17.6906 170.341 17.6906C170.23 17.6906 170.126 17.6409 170.051 17.5596C169.703 17.1825 169.285 16.8834 168.795 16.6623C168.25 16.4162 167.705 16.2932 167.161 16.2932C166.686 16.2932 166.308 16.3898 166.027 16.5832C165.745 16.7678 165.605 17.0139 165.605 17.3215C165.605 17.5148 165.688 17.6774 165.855 17.8093C166.066 17.9851 166.299 18.1257 166.554 18.2312C166.598 18.2487 166.725 18.3059 166.936 18.4025C167.156 18.4904 167.358 18.5695 167.543 18.6398C167.78 18.7365 167.978 18.8156 168.136 18.8771C169.226 19.3693 170.035 19.923 170.562 20.5383C171.089 21.1447 171.353 21.905 171.353 22.819C171.353 24.2429 170.799 25.3723 169.692 26.2072C168.584 27.051 167.13 27.4729 165.328 27.4729Z"
						fill="#0E1C2F"
					/>
				</svg>
			</div>

			<div class="flex flex-col gap-6 mt-4">
				<div v-if="badgeLabel" class="flex">
					<span
						class="flex items-center self-start px-4 py-2 rounded-full font-semibold uppercase text-lg bg-[#f0ecff] text-[#6644ff]"
					>
						{{ badgeLabel }}
					</span>
				</div>
				<div class="flex">
					<h1
						v-if="title"
						:style="{ fontFamily: 'Poppins' }"
						class="text-[#0e1c2f] text-5xl md:text-6xl leading-tight font-semibold max-w-[520px]"
					>
						{{ truncate(title, 70) }}
					</h1>
				</div>
				<div v-if="publishedAt" class="flex">
					<div class="text-xl text-slate-500 line-clamp-2">
						{{ publishedAt }}
					</div>
				</div>
			</div>

			<div v-if="authorName || authorImage" class="flex items-center justify-start mt-4">
				<img v-if="authorImage" :src="authorImage" class="w-16 h-16 rounded-full object-cover" width="64" height="64">

				<span v-if="authorName" class="text-xl ml-4 text-slate-700 font-medium">{{ authorName }}</span>
			</div>
		</div>

		<!-- Right Side - Image -->
		<div class="flex relative w-[600px] h-full">
			<div class="flex absolute inset-0 w-full h-full overflow-hidden bg-slate-100">
				<img v-if="imageUrl" :src="imageUrl" class="w-full h-full object-cover">
			</div>
			<svg
				class="absolute -ml-[1px] left-0 h-full w-full max-w-[200px] fill-white text-white"
				viewBox="0 0 100 100"
				preserveAspectRatio="none"
				aria-hidden="true"
			>
				<polygon points="0,100 50,0 90,0 0,0" fill="currentColor" />
			</svg>
		</div>
	</div>
</template>
